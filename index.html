<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Family Fued!</title>
  <link rel="icon" type="image/png" sizes="32x32" href="../images/favicon.png">
  <!-- Bulma Version 0.9.0-->
   <link href="https://fonts.googleapis.com/css2?family=Playfair+Display&family=Work+Sans&display=swap" rel="stylesheet">
  <link rel='stylesheet' href='https://unpkg.com/bulma@0.9.0/css/bulma.min.css'>
  <link rel="stylesheet" href="style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <script src="https://kit.fontawesome.com/7dc3015a44.js" crossorigin="anonymous"></script>
  <style>
    .timer {
        font-size: 40px;
    }
    .time-buttons button {
        /* Button style goes here */
    }

    .timer-holder {
      background-color: whitesmoke; 
      padding-top: 2px; 
      margin-top: 10px; 
      padding-right: 12px; 
      margin-left: 4px;
      border-radius: 5px;
    }
</style>
<!-- add bootstrap -->
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"> -->
</head>
<body>
    <div id="confetti-container">
  <section class="container">
     <div class=topContainer> 
      <h1 class="title is-1" style="color: azure; text-align: center;"> Chemistry Feud </h1>
    <!-- <img src="https://upload.wikimedia.org/wikipedia/commons/c/c7/Logo_of_Family_Feud.png" alt="logo" class="logo" />  -->
      <div class=innerContainer>
        <button class="button topButton questionButton hoverChange is-info is-dark is-medium" onclick="submit()">New
          Question </button>
        <div class="button topButton team1 scoreButton hoverChange is-info is-dark  is-medium" onclick="points()"> Team 1 Total Score: 0 </div>
        <div class=" button topButton team2 scoreButton hoverChange is-info is-dark is-medium" onclick="points()"> Team 2 Total Score: 0 </div>
        <div class="  button topButton roundScore scoreButton hoverChange is-info is-dark is-medium"> Round Score: 0 </div>
        <div class=" button topButton guessesLeft scoreButton hoverChange is-info is-dark is-medium"> Guesses Left: 3 </div>
        <div class=" button topButton endGame scoreButton hoverChange is-info is-dark is-medium"> End Game </div>
      </div>
    </div>
  </section>
  <div style="display: flex;">
  <input id="guess" class="input is-primary is-large" type="text" name="language"
        placeholder="Type your guess here!" />
        <script>
          document.getElementById("guess").addEventListener("keyup", function(event) {
            if (event.keyCode === 13) {
              event.preventDefault();
              document.getElementById("submitButton").click();
            }
          });
    </script>
    <!-- create a hidden submit button -->
    <button id="submitButton" class="button is-primary is-large hidden" onclick="team()">Submit</button>
    <div style="display: inline;" >
      <div class="text-center timer-holder">
        <div class="timer">
            <span class="minutes"> 02 </span> : <span class="seconds"> 00 </span>
            <select class="btn btn-lg btn-default hidden" id="time-options">
                <option value="0">Select Time</option>
                <option value="10">10 Seconds</option>
                <option value="30">30 Seconds</option>
                <option value="60">1 Minute</option>
                <option value="120" selected>2 Minutes</option>
                <option value="300">5 Minutes</option>
                <!-- Add more options as needed -->
            </select>
            <button class="button hoverChange is-info is-dark is-medium" data-action="start"> Start </button>
            <button class="button hoverChange is-info is-dark is-medium" data-action="stop"> Stop </button>
            <button class="button hoverChange is-info is-dark is-medium" data-action="pause"> Pause </button>
            <script>
              const selectTimeOptions = document.getElementById('time-options');
              const btnStartElement = document.querySelector(' [data-action="start"]');
              const btnStopElement = document.querySelector(' [data-action="stop"]');
              const btnPauseElement = document.querySelector(' [data-action="pause"]');
              const btnResetElement = document.querySelector(' [data-action="reset"]');
              const minutes = document.querySelector('.minutes');
              const seconds = document.querySelector('.seconds');
              let timerTime = 120; // 5 minutes initially
              let interval;
              let isPaused = false;
              let isAlreadyStarted = false;
      
              // add event listeners for keypresses

              // if we focus on the input, we want to pause the timer
              document.getElementById("guess").addEventListener("focus", function(event) {
                pause();
              });

              // and if we unfocus, we want to start the timer again
              document.getElementById("guess").addEventListener("blur", function(event) {
                start();
              });
      
              const start = () => {
                if(!isAlreadyStarted){
                  isAlreadyStarted = true;
                  isPaused = false;
                  interval = setInterval(decrementTimer, 1000);
                }else{
                  if(isPaused){
                    isPaused = false;
                    interval = setInterval(decrementTimer, 1000);
                  }
                }
              }
      
              const stop = () => {
                  isPaused = false;
                  clearInterval(interval);
                  // timerTime = 300; // Reset to 5 minutes
                  timerTime = parseInt(selectTimeOptions.value);
                  isAlreadyStarted = false;
                  updateDisplay();
              }
      
              const pause = () => {
                  isPaused = true;
                  clearInterval(interval);
              }
      
              const reset = () => {
                  isPaused = false;
                  // timerTime = 300; // Reset to 5 minutes
                  timerTime = parseInt(selectTimeOptions.value);
                  updateDisplay();
              }
      
              const pad = (number) => {
                  return (number < 10) ? '0' + number : number;
              }
      
              const decrementTimer = () => {
                  if(timerTime == 0) {
                      // play a sound
                      sound = new Audio("alarm.wav");
                      sound.play();
                      isAlreadyStarted = false;
                      clearInterval(interval);
                  }
                  if (timerTime > 0) {
                      timerTime--;
                      updateDisplay();
                  } else {
                      clearInterval(interval);
                  }
              }
      
              const updateDisplay = () => {
                  const numberMinutes = Math.floor(timerTime / 60);
                  const numberSeconds = timerTime % 60;
                  minutes.innerText = pad(numberMinutes);
                  seconds.innerText = pad(numberSeconds);
              }
      
              selectTimeOptions.addEventListener('change', () => {
                  // Optional: Update timerTime based on the selected option immediately
                  timerTime = parseInt(selectTimeOptions.value);
                  updateDisplay();
              });
      
              btnStartElement.addEventListener('click', start);
              btnStopElement.addEventListener('click', stop);
              btnPauseElement.addEventListener('click', pause);
              btnResetElement.addEventListener('click', reset);
          </script>
        </div>
    </div>
    </div>
  </div>
  <br>
  <section class=" container">
    <div class="board-item">
      <div class="questionBox board-item-content"><span> Click the New Question button to play!</span</div>
      </div>
  </section>
  <div> 
  <!-- <section class="timerArea">
    <div class="btnGroup">
      <span>
        <span class="timer">
          <span>
            <div class=" button is-info is-light is-medium counter" id="counter"> Time Left: <br> 1:00 </div>
          </span>
        </span>
      </span>
    </div>
  </section> -->
  <section>
    <div style="margin-left: 5%">
      <div class="columns is-multiline is-centered cards-container" id="sectioncontainer">
        <div class="column">
          <article class="answerCards" id="createaccordingtoanswers">
            <div class="board-item">
              <div class="board-item-content" id="box"><span class="hidden answer" id="0"> Answer 1 </span> </div>
            </div>
            <div class="board-item">
              <div class="board-item-content" id="box"><span class="hidden answer" id="1"> Answer 2 </span></div>
            </div>
            <div class="board-item">
              <div class="board-item-content" id="box"><span class="hidden answer" id="2"> Answer 3 </span></div>
            </div>
            <div class="board-item">
              <div class="board-item-content" id="box"><span class="hidden answer" id="3">Answer 4</span></div>
            </div>
          </article>
        </div>
      </div>
  </section>
</div> 
<br>
  <h3 id="incorrectAnswerResponse" class="hidden"> Your guess is incorrect </h3>
<br>
    <footer class="footer">
      <br>
      <div class="content has-text-centered">
        <p>
          <strong>Chemistry Feud</strong> Thanks to  <a href="https://github.com/ranadubauskas/family-feud">Rana Dubauskas</a> for the original code!
        </p>
      <br>
    </footer>
    <script src="./script.js" defer></script> 
        </div>
</body>
  

</html>